(()=>{"use strict";var e={426:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"/**\r\n * Body CSS\r\n */\r\n\r\n html,\r\n body {\r\n   height: 100%;\r\n }\r\n \r\n html,\r\n body,\r\n input,\r\n textarea,\r\n button {\r\n   -webkit-font-smoothing: antialiased;\r\n   -moz-osx-font-smoothing: grayscale;\r\n   text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.004);\r\n }\r\n \r\n \r\n /**\r\n  * Sidebar CSS\r\n  */\r\n \r\n #sidebar {\r\n   background-color: #2196F3;\r\n   padding: 15px;\r\n }\r\n \r\n @media (min-width: 768px) {\r\n   #sidebar {\r\n     position: fixed;\r\n     top: 0;\r\n     bottom: 0;\r\n     width: 180px;\r\n     height: 100%;\r\n     padding-top: 30px;\r\n   }\r\n }\r\n \r\n \r\n /**\r\n  * Content CSS\r\n  */\r\n @media (min-width: 768px) {\r\n   #content {\r\n     margin-left: 180px;\r\n   }\r\n }\r\n.questions{\r\n  margin-top: 1rem;\r\n}\r\n.question{\r\n  width: 100%;\r\n  border-radius: .2rem;\r\n  box-shadow: 1px 2px 10px #888888;\r\n  padding: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.question-date{\r\n  width: max-content;\r\n  border-bottom: 1px solid #888888;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.question-text{\r\n  font-size: 1rem;\r\n}\r\n .author{\r\n   font-size: 1rem;\r\n }\r\n\r\n .fluid-btn{\r\n   position: fixed;\r\n   bottom: 50px;\r\n   right: 50px;\r\n   width: 70px;\r\n   height: 70px;\r\n }\r\n\r\n .modal{\r\n   max-width: 600px;\r\n   max-height: 400px;\r\n   overflow-y: auto;\r\n   background-color: #fff;\r\n   margin: 100px auto;\r\n }\r\n\r\n .modal > h1{\r\n   text-align: center;\r\n   font-size: 1.275rem;\r\n }\r\n \r\n .modal-content{\r\n   padding: 0 1rem 1rem 1rem;\r\n }\r\n.subtitle{\r\n  text-align: center;\r\n  font-size: 1.275rem;\r\n}\r\n\r\n.error{\r\n  color: red;\r\n}\r\n\r\n.success{\r\n  color: green;\r\n}",""]);const o=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);r&&i[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),t.push(d))}},t}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},a=[],s=0;s<e.length;s++){var d=e[s],u=r.base?d[0]+r.base:d[0],l=o[u]||0,c="".concat(u," ").concat(l);o[u]=l+1;var m=n(c),p={css:d[1],media:d[2],sourceMap:d[3]};-1!==m?(t[m].references++,t[m].updater(p)):t.push({identifier:c,updater:i(p,r),references:1}),a.push(c)}return a}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=r(e=e||[],i=i||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var d=r(e,i),u=0;u<o.length;u++){var l=n(o[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=d}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(379),t=n.n(e),r=n(795),i=n.n(r),o=n(569),a=n.n(o),s=n(565),d=n.n(s),u=n(216),l=n.n(u),c=n(589),m=n.n(c),p=n(426),f={};f.styleTagTransform=m(),f.setAttributes=d(),f.insert=a().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=l(),t()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals;class b{static getAuthForm(){return'\n        <form class="mui-form" id="auth-form">\n            <div class="mui-textfield mui-textfield--float-label">\n                <input type="email" id="email" required>\n                <label for="email">Email</label>\n            </div>\n            <div class="mui-textfield mui-textfield--float-label">\n                <input type="password" id="password" required minLength=\'6\'>\n                <label for="password">Password</label>\n            </div>\n            <div id="error"></div>\n            <button type="submit" id="submit" class="mui-btn mui-btn--raised mui-btn--primary" disabled>LOGIN</button>\n            <div>\n                <span>If you don\'t have an account please register: </span>\n                <button type="button" id="singup-btn" class="mui-btn mui-btn--flat mui-btn--primary">REGISTER</button>\n            </div>\n            \n        </form>\n        '}static getSingUpForm(){return'\n        <form class="mui-form" id="sing-up-form">\n            <div class="mui-textfield mui-textfield--float-label">\n                <input type="email" id="email" required>\n                <label for="email">Email</label>\n            </div>\n            <div class="mui-textfield mui-textfield--float-label">\n                <input type="password" id="password" required minLength=\'6\'>\n                <label for="password">Password</label>\n            </div>\n            <div class="mui-textfield mui-textfield--float-label">\n                <input type="password" id="repeat-password" required minLength=\'6\'>\n                <label for="repeat-password">Repeat password</label>\n            </div>\n            <div id="error"></div>\n            <button type="submit" class="mui-btn mui-btn--raised mui-btn--primary" disabled>Register</button>\n        </form>\n        '}static successSingUp(){return'\n            <div>\n                <p class=\'success\'>You successfully registered. You can login now to see the questions</p>\n                <button type="button" id="success-singup-btn" class="mui-btn mui-btn--flat mui-btn--primary">LOGIN</button>\n            </div>\n        '}static toCard(e){return`\n        <div class="question">\n            <div class="mui--text-black-54 question-date">\n                ${new Date(e.date).toLocaleDateString()}\n                ${new Date(e.date).toLocaleTimeString()}\n            </div>\n            <div class="question-text">${e.text}</div>\n        </div>`}}class g{static create(e){return fetch("https://js-questions-app-c2fe8-default-rtdb.europe-west1.firebasedatabase.app/questions.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>(e.id=t.name,e))).then(v).then(g.renderList)}static renderList(){const e=h();if(!localStorage.getItem("userToken")){const e='<div class="mui--text-headline subtitle">If you want to see already asked questions please login</div>';return void(document.getElementById("list").innerHTML=e)}const t=e.length?e.map(b.toCard).join(""):'<div class="mui--text-headline">No any questions yet</div>';document.getElementById("list").innerHTML=t}static getQuestionsForAuthUser(e){return e?(localStorage.setItem("userToken",e),fetch(`https://js-questions-app-c2fe8-default-rtdb.europe-west1.firebasedatabase.app/questions.json?auth=${e}`).then((e=>e.json())).then((e=>(console.log(e),e.error?`<p class='error'>${e.error}</p>`:e?Object.keys(e).map((t=>({...e[t],id:t}))):[])))):Promise.resolve("<p class='error'>You provide wrong email or password</p>")}}function v(e){let t=h();e.length?t=[...e].sort(((e,t)=>new Date(t.date)-new Date(e.date))):t.unshift(e),localStorage.setItem("questions",JSON.stringify(t))}function h(){return JSON.parse(localStorage.getItem("questions")||"[]")}function y(e){return e.length>=10}function S(e,t){const n=document.createElement("div");n.classList.add("modal"),n.innerHTML=`\n        <h1>${e}</h1>\n        <div class='modal-content'>${t}</div>\n    `,mui.overlay("on",n)}const x=(e,t)=>({method:"POST",body:JSON.stringify({email:e,password:t,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}),w=document.getElementById("form"),q=w.querySelector("#question-input"),L=w.querySelector("#submit "),I=document.getElementById("modal");function E(){if(localStorage.getItem("userToken"))return localStorage.clear(),g.renderList(),void(I.childNodes[0].data="LOGIN");S("LOGIN",b.getAuthForm());const e=document.querySelector("#auth-form");e.querySelector("#password").addEventListener("input",(t=>{e.querySelector("button").disabled=!y(t.target.value)})),e.addEventListener("submit",T),e.querySelector("#singup-btn").addEventListener("click",(()=>{S("REGISTER",b.getSingUpForm());const e=document.querySelector("#sing-up-form");e.querySelector("#password").addEventListener("input",(t=>{e.querySelector("button").disabled=!y(t.target.value)})),e.addEventListener("submit",N)}))}function T(e){e.preventDefault();const t=e.target.querySelector("button"),n=e.target.querySelector("#email").value,r=e.target.querySelector("#password").value;t.disabled=!0,function(e,t){return fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyCIek1UGaS_7ByKTIMlIHy4us06FwGlFsg",x(e,t)).then((e=>e.json())).then((e=>e.idToken))}(n,r).then(g.getQuestionsForAuthUser).then(k).then((()=>{I.childNodes[0].data="LOGOUT",t.disabled=!1}))}function k(e){"string"==typeof e?document.getElementById("error").innerHTML=e:(mui.overlay("off"),v(e),g.renderList())}function N(e){e.preventDefault();const t=e.target.querySelector("button"),n=e.target.querySelector("#email"),r=e.target.querySelector("#password"),i=e.target.querySelector("#repeat-password").value,o=e.target.querySelector("#error");r.addEventListener("input",(e=>{t.disabled=y(e.target.value)})),r.value===i?(t.disabled=!0,function(e,t){return fetch("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCIek1UGaS_7ByKTIMlIHy4us06FwGlFsg",x(e,t)).then((e=>e.json()))}(n.value,r.value).then((e=>{e.error?o.innerHTML=`<p class='error'>${e.error.message.replace("_"," ")}</p>`:(S("SUCCESS SING UP",b.successSingUp()),document.getElementById("success-singup-btn").addEventListener("click",E))})).then((()=>t.disabled=!1))):o.innerHTML="<p class='error'>Passwords don't match</p>"}window.addEventListener("load",g.renderList),window.addEventListener("load",(()=>{localStorage.getItem("userToken")?I.childNodes[0].data="LOGOUT":I.childNodes[0].data="LOGIN"})),w.addEventListener("submit",(function(e){if(e.preventDefault(),y(q.value)){const e={text:q.value.trim(),date:(new Date).toJSON()};L.disabled=!0,g.create(e).then((e=>{q.value="",q.className="",L.disabled=!1}))}})),q.addEventListener("input",(e=>{L.disabled=!y(e.target.value)})),I.addEventListener("click",E)})()})();